let draw=!1;!function($){"use strict";var preloader=$("#preloader");if($(window).on("load",(function(){setTimeout((function(){preloader.fadeOut("slow",(function(){$(this).remove()}))}),300)})),$(window).on("scroll",(function(){var scroll=$(window).scrollTop(),mainHeader,mainHeaderHeight=$("#sticky-header").innerHeight();scroll>1?$("#sticky-header").addClass("sticky-menu"):$("#sticky-header").removeClass("sticky-menu")})),$("#dataTable3").length){const table=$("#dataTable3").DataTable({dom:"lBfrtip",data:data.Final_result,columns:[{data:"Nom Com"},{data:"Code Iris"},{data:"Rank of ScoreGlobal"},{data:"Nom Iris"},{data:"Population"},{data:"Score Global"},{data:"Acces Aux_interfaces_numeriques_intercommunalite"},{data:"Access Al_information_intercommunalite"},{data:"competences_administative_intercommunalite"},{data:"competence_numeriques_intercommunalite"},{data:"global_access_intercommunalite"},{data:"global_competence_intercommunalite"}],buttons:["copyHtml5","excelHtml5","csvHtml5"],deferLoading:50,info:!0,deferRender:!0,scrollY:"500px",scrollX:!0,scrollCollapse:!0,paging:!0,lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],fixedColumns:{leftColumns:4,heightMatch:"none"}}),tableData=getTableData(table);createHighcharts(tableData),setTableEvents(table)}if($("#full-view").length){var requestFullscreen=function(ele){ele.requestFullscreen?ele.requestFullscreen():ele.webkitRequestFullscreen?ele.webkitRequestFullscreen():ele.mozRequestFullScreen?ele.mozRequestFullScreen():ele.msRequestFullscreen?ele.msRequestFullscreen():console.log("Fullscreen API is not supported.")},exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():console.log("Fullscreen API is not supported.")},fsDocButton=document.getElementById("full-view"),fsExitDocButton=document.getElementById("full-view-exit");fsDocButton.addEventListener("click",(function(e){e.preventDefault(),requestFullscreen(document.documentElement),$("body").addClass("expanded")})),fsExitDocButton.addEventListener("click",(function(e){e.preventDefault(),exitFullscreen(),$("body").removeClass("expanded")}))}function getTableData(table){const dataArray=[],NomArray=[],populationArray=[],ScoreGlobalArray=[];return table.rows({search:"applied"}).every((function(){if(NomArray.length<=100){const data=this.data();NomArray.push(data["Nom Com"]),populationArray.push(data["Score Global"]),ScoreGlobalArray.push(data.Population)}})),dataArray.push(NomArray,populationArray,ScoreGlobalArray),dataArray}function createHighcharts(data){Highcharts.setOptions({lang:{thousandsSep:","}}),Highcharts.chart("chart",{title:{text:"Nom Com Vs Global Score Chart"},xAxis:[{categories:data[0],labels:{rotation:-45}}],yAxis:[{title:{text:"Population"}},{title:{text:"Score Global"},min:0,opposite:!0}],series:[{name:"Population",color:"#0071A7",type:"column",data:data[2],tooltip:{valueSuffix:" M"}},{name:"Score Global",color:"#FF404E",type:"spline",data:data[1],yAxis:1}],tooltip:{shared:!0},legend:{backgroundColor:"#ececec",shadow:!0},credits:{enabled:!1},noData:{style:{fontSize:"16px"}}})}function setTableEvents(table){table.on("page",()=>{draw=!0}),table.on("draw",()=>{if(draw)draw=!1;else{const tableData=getTableData(table);createHighcharts(tableData)}})}$("#inputRegion").change((function(){var posturl="/index_get_data",val={region:$(this).val(),change:"region",donnees_infra_communales:$("#inputDonnes").val(),Choix_de_Point_Reference:$("#inputChoice").val()};$.ajax({type:"POST",url:posturl,dataType:"json",contentType:"application/json",data:JSON.stringify(val),success:function(response){$("#inputDepartment").html("");var optionText="ALL",optionValue="ALL";$("#inputDepartment").append(new Option("ALL","ALL")),$(response.data.distinct_filter).each((function(){$("<option />",{val:this,text:this}).appendTo("#inputDepartment")})),$('#inputDepartment option[value="ALL"]').attr("selected",!0),$("#inputDepartment").prop("disabled",!1),$("#inputInterCommunalities").prop("disabled",!0),$("#inputCommune").prop("disabled",!0),$('#inputInterCommunalities option[value="ALL"]').attr("selected",!0),$('#inputCommune option[value="ALL"]').attr("selected",!0);var datatable=$("#dataTable3").DataTable();datatable.clear().draw(),datatable.rows.add(response.data.Final_result),datatable.columns.adjust().draw()},error:function(error){console.log(error)}})})),$("#inputDepartment").change((function(){var posturl="/index_get_data",val={region:$("#inputRegion").val(),department:$(this).val(),change:"department",donnees_infra_communales:$("#inputDonnes").val(),Choix_de_Point_Reference:$("#inputChoice").val()};$.ajax({type:"POST",url:posturl,dataType:"json",contentType:"application/json",data:JSON.stringify(val),success:function(response){$("#inputInterCommunalities").html("");var optionText="ALL",optionValue="ALL";$("#inputInterCommunalities").append(new Option("ALL","ALL")),$(response.data.distinct_filter).each((function(){$("<option />",{val:this,text:this}).appendTo("#inputInterCommunalities")})),$('#inputDepartment option[value="ALL"]').attr("selected",!0),$("#inputInterCommunalities").prop("disabled",!1),$("#inputCommune").prop("disabled",!0),$('#inputCommune option[value="ALL"]').attr("selected",!0);var datatable=$("#dataTable3").DataTable();datatable.clear().draw(),datatable.rows.add(response.data.Final_result),datatable.columns.adjust().draw()},error:function(error){console.log(error)}})})),$("#inputInterCommunalities").change((function(){var posturl="/index_get_data",val={region:$("#inputRegion").val(),department:$("#inputDepartment").val(),intercommunalities:$(this).val(),change:"intercommunalities",donnees_infra_communales:$("#inputDonnes").val(),Choix_de_Point_Reference:$("#inputChoice").val()};$.ajax({type:"POST",url:posturl,dataType:"json",contentType:"application/json",data:JSON.stringify(val),success:function(response){$("#inputCommune").html("");var optionText="ALL",optionValue="ALL";$("#inputCommune").append(new Option("ALL","ALL")),$(response.data.distinct_filter).each((function(){$("<option />",{val:this,text:this}).appendTo("#inputCommune")})),$('#inputDepartment option[value="ALL"]').attr("selected",!0),$("#inputCommune").prop("disabled",!1);var datatable=$("#dataTable3").DataTable();datatable.clear().draw(),datatable.rows.add(response.data.Final_result),datatable.columns.adjust().draw()},error:function(error){console.log(error)}})})),$("#inputCommune").change((function(){var posturl="/index_get_data",val={region:$("#inputRegion").val(),department:$("#inputDepartment").val(),intercommunalities:$("#inputInterCommunalities").val(),change:"commune",commune:$(this).val(),donnees_infra_communales:$("#inputDonnes").val(),Choix_de_Point_Reference:$("#inputChoice").val()};$.ajax({type:"POST",url:posturl,dataType:"json",contentType:"application/json",data:JSON.stringify(val),success:function(response){var datatable=$("#dataTable3").DataTable();datatable.clear().draw(),datatable.rows.add(response.data.Final_result),datatable.columns.adjust().draw()},error:function(error){console.log(error)}})})),$("#inputChoice").change((function(){var posturl="/index_get_data",val={region:$("#inputRegion").val(),department:$("#inputDepartment").val(),intercommunalities:$("#inputInterCommunalities").val(),change:"Choix_de_Point_Reference",commune:$("#inputCommune").val(),donnees_infra_communales:$("#inputDonnes").val(),Choix_de_Point_Reference:$(this).val()};$.ajax({type:"POST",url:posturl,dataType:"json",contentType:"application/json",data:JSON.stringify(val),success:function(response){var datatable=$("#dataTable3").DataTable();datatable.clear().draw(),datatable.rows.add(response.data.Final_result),datatable.columns.adjust().draw()},error:function(error){console.log(error)}})})),$("#inputDonnes").change((function(){var posturl="/index_get_data",val={region:$("#inputRegion").val(),department:$("#inputDepartment").val(),intercommunalities:$("#inputInterCommunalities").val(),change:"donnees_infra_communales",commune:$("#inputCommune").val(),donnees_infra_communales:$(this).val(),Choix_de_Point_Reference:$("#inputChoice").val()};$.ajax({type:"POST",url:posturl,dataType:"json",contentType:"application/json",data:JSON.stringify(val),success:function(response){var datatable=$("#dataTable3").DataTable();datatable.clear().draw(),datatable.rows.add(response.data.Final_result),datatable.columns.adjust().draw()},error:function(error){console.log(error)}})}))}(jQuery);